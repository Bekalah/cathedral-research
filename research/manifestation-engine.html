<!DOCTYPE html>
<html lang="en">
    <head>
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:;">
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Manifestation Engine - The Magician's Workshop</title>
            <meta name="cathedral:purpose" content="Trauma-aware manifestation technology">
            <style>
                @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600&family=Cormorant+Garamond:wght@300;400;600&display=swap');
                :root {
                --gold: #d4af37;
                --deep-purple: #4a148c;
                --royal-purple: #7b1fa2;
                --fire-orange: #ff6b35;
                --ethereal-silver: #e8eaf6;
                --void-black: #0a0a0f;
                --escape-glow: #ffff00;
                --safe-green: #2ecc71;
                }
                * { margin: 0; padding: 0; box-sizing: border-box; }
                body {
                background: linear-gradient(135deg, var(--void-black) 0%, var(--deep-purple) 40%, var(--fire-orange) 100%);
                font-family: 'Cormorant Garamond', serif;
                color: var(--ethereal-silver);
                min-height: 100vh;
                overflow-x: hidden;
                }
                /* Safety Portal */
                .escape-portal {
                position: fixed;
                top: 20px;
                right: 20px;
                z-index: 10000;
                background: rgba(0, 0, 0, 0.9);
                border: 2px solid var(--escape-glow);
                border-radius: 12px;
                padding: 12px;
                backdrop-filter: blur(10px);
                display: flex;
                align-items: center;
                gap: 10px;
                }
                .escape-key {
                background: var(--escape-glow);
                color: black;
                padding: 8px 12px;
                border-radius: 6px;
                font-family: 'Cinzel', serif;
                font-weight: 600;
                font-size: 14px;
                }
                /* Header */
                .header {
                text-align: center;
                padding: 50px 20px;
                }
                .title {
                font-family: 'Cinzel', serif;
                font-size: 3.5em;
                font-weight: 600;
                color: var(--gold);
                text-shadow: 0 0 30px rgba(212, 175, 55, 0.4);
                margin-bottom: 10px;
                }
                .subtitle {
                font-size: 1.3em;
                color: var(--fire-orange);
                font-weight: 300;
                letter-spacing: 0.08em;
                }
                /* Main Workshop */
                .workshop {
                max-width: 1200px;
                margin: 0 auto;
                padding: 0 20px;
                display: grid;
                grid-template-columns: 1fr 2fr;
                gap: 40px;
                }
                /* Control Panel */
                .control-panel {
                background: rgba(255, 255, 255, 0.05);
                border: 2px solid rgba(212, 175, 55, 0.3);
                border-radius: 25px;
                padding: 30px;
                backdrop-filter: blur(20px);
                height: fit-content;
                }
                .panel-section {
                margin-bottom: 30px;
                padding-bottom: 25px;
                border-bottom: 1px solid rgba(212, 175, 55, 0.2);
                }
                .panel-section:last-child {
                border-bottom: none;
                margin-bottom: 0;
                }
                .section-title {
                font-family: 'Cinzel', serif;
                font-size: 1.3em;
                color: var(--gold);
                margin-bottom: 15px;
                text-align: center;
                }
                /* Intention Input */
                .intention-input {
                width: 100%;
                min-height: 120px;
                background: rgba(0, 0, 0, 0.3);
                border: 1px solid rgba(212, 175, 55, 0.4);
                border-radius: 15px;
                padding: 15px;
                color: var(--ethereal-silver);
                font-family: 'Cormorant Garamond', serif;
                font-size: 1.1em;
                resize: vertical;
                outline: none;
                }
                .intention-input:focus {
                border-color: var(--gold);
                box-shadow: 0 0 15px rgba(212, 175, 55, 0.3);
                }
                .intention-input::placeholder {
                color: rgba(232, 234, 246, 0.5);
                font-style: italic;
                }
                /* Element Selectors */
                .element-grid {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 10px;
                }
                .element-button {
                background: rgba(255, 255, 255, 0.05);
                border: 1px solid rgba(255, 255, 255, 0.2);
                border-radius: 15px;
                padding: 15px;
                color: var(--ethereal-silver);
                cursor: pointer;
                transition: all 0.3s ease;
                text-align: center;
                font-family: 'Cormorant Garamond', serif;
                }
                .element-button.fire {
                border-color: #ff6b35;
                }
                .element-button.fire.active {
                background: linear-gradient(135deg, #ff6b35, #ff8a50);
                color: white;
                box-shadow: 0 0 20px rgba(255, 107, 53, 0.4);
                }
                .element-button.water {
                border-color: #3498db;
                }
                .element-button.water.active {
                background: linear-gradient(135deg, #3498db, #5dade2);
                color: white;
                box-shadow: 0 0 20px rgba(52, 152, 219, 0.4);
                }
                .element-button.air {
                border-color: #f1c40f;
                }
                .element-button.air.active {
                background: linear-gradient(135deg, #f1c40f, #f4d03f);
                color: black;
                box-shadow: 0 0 20px rgba(241, 196, 15, 0.4);
                }
                .element-button.earth {
                border-color: #2ecc71;
                }
                .element-button.earth.active {
                background: linear-gradient(135deg, #2ecc71, #58d68d);
                color: white;
                box-shadow: 0 0 20px rgba(46, 204, 113, 0.4);
                }
                /* Sacred Geometry */
                .geometry-selector {
                display: grid;
                grid-template-columns: repeat(3, 1fr);
                gap: 8px;
                }
                .geometry-button {
                aspect-ratio: 1;
                background: rgba(255, 255, 255, 0.05);
                border: 1px solid rgba(212, 175, 55, 0.3);
                border-radius: 50%;
                cursor: pointer;
                transition: all 0.3s ease;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 1.5em;
                }
                .geometry-button.active {
                background: linear-gradient(135deg, var(--gold), var(--royal-purple));
                box-shadow: 0 0 15px rgba(212, 175, 55, 0.4);
                transform: scale(1.1);
                }
                /* Manifestation Button */
                .manifest-button {
                width: 100%;
                padding: 20px;
                background: linear-gradient(135deg, var(--gold), var(--fire-orange));
                border: none;
                border-radius: 20px;
                color: white;
                font-family: 'Cinzel', serif;
                font-size: 1.2em;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.4s ease;
                text-transform: uppercase;
                letter-spacing: 0.1em;
                box-shadow: 0 10px 30px rgba(212, 175, 55, 0.3);
                }
                .manifest-button:hover {
                transform: translateY(-3px);
                box-shadow: 0 15px 40px rgba(212, 175, 55, 0.5);
                }
                .manifest-button:disabled {
                opacity: 0.5;
                cursor: not-allowed;
                transform: none;
                }
                /* Manifestation Canvas */
                .manifestation-display {
                background: rgba(0, 0, 0, 0.3);
                border: 2px solid rgba(212, 175, 55, 0.4);
                border-radius: 25px;
                padding: 20px;
                min-height: 600px;
                position: relative;
                overflow: hidden;
                }
                .display-title {
                text-align: center;
                font-family: 'Cinzel', serif;
                font-size: 1.5em;
                color: var(--gold);
                margin-bottom: 20px;
                }
                #manifestation-canvas {
                width: 100%;
                height: 500px;
                border-radius: 15px;
                background: radial-gradient(circle at center, rgba(212, 175, 55, 0.1), transparent);
                }
                /* Progress Tracking */
                .progress-section {
                margin-top: 20px;
                text-align: center;
                }
                .progress-bar {
                width: 100%;
                height: 8px;
                background: rgba(255, 255, 255, 0.1);
                border-radius: 4px;
                overflow: hidden;
                margin: 10px 0;
                }
                .progress-fill {
                height: 100%;
                background: linear-gradient(90deg, var(--gold), var(--fire-orange));
                border-radius: 4px;
                transition: width 1s ease;
                }
                .manifestation-log {
                background: rgba(0, 0, 0, 0.2);
                border-radius: 10px;
                padding: 15px;
                margin-top: 15px;
                max-height: 200px;
                overflow-y: auto;
                font-size: 0.9em;
                line-height: 1.4;
                }
                .log-entry {
                padding: 5px 0;
                border-bottom: 1px solid rgba(255, 255, 255, 0.1);
                }
                .log-entry:last-child {
                border-bottom: none;
                }
                .log-timestamp {
                color: var(--gold);
                font-size: 0.8em;
                }
                /* Responsive */
                @media (max-width: 1024px) {
                .workshop {
                grid-template-columns: 1fr;
                gap: 20px;
                }
                .title {
                font-size: 2.5em;
                }
                }
                /* Reduced motion support */
                @media (prefers-reduced-motion: reduce) {
                * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
                }
                }
            </style>
        </head>
        <body>
            <!-- Safety Portal -->
            <div class="escape-portal">
                <div class="escape-key">ESC</div>
                    <div style="color: var(--safe-green); font-size: 12px;">Return to Cathedral</div>
                    </div>
                    <!-- Header -->
                    <div class="header">
                        <h1 class="title">Manifestation Engine</h1>
                            <p class="subtitle">The Magician's Sacred Workshop • Node 1</p>
                            </div>
                            <!-- Main Workshop -->
                            <div class="workshop">
                                <!-- Control Panel -->
                                <div class="control-panel">
                                    <!-- Intention Setting -->
                                    <div class="panel-section">
                                        <h3 class="section-title">Set Your Intention</h3>
                                            <textarea
                                                class="intention-input"
                                                id="intention-input"
                                                placeholder="Speak your deepest intention into being... What do you wish to manifest in this sacred space? Be specific, be clear, be true to your highest self."
                                                >
                                            </textarea>
                                        </div>
                                        <!-- Elemental Alignment -->
                                        <div class="panel-section">
                                            <h3 class="section-title">Elemental Alignment</h3>
                                                <div class="element-grid">
                                                    <div class="element-button fire" onclick="selectElement('fire')">
                                                        <div>🔥 Fire</div>
                                                            <div style="font-size: 0.8em; margin-top: 5px;">Passion • Action</div>
                                                            </div>
                                                            <div class="element-button water" onclick="selectElement('water')">
                                                                <div>💧 Water</div>
                                                                    <div style="font-size: 0.8em; margin-top: 5px;">Emotion • Flow</div>
                                                                    </div>
                                                                    <div class="element-button air" onclick="selectElement('air')">
                                                                        <div>🌪️ Air</div>
                                                                            <div style="font-size: 0.8em; margin-top: 5px;">Thought • Communication</div>
                                                                            </div>
                                                                            <div class="element-button earth" onclick="selectElement('earth')">
                                                                                <div>🌱 Earth</div>
                                                                                    <div style="font-size: 0.8em; margin-top: 5px;">Material • Stability</div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <!-- Sacred Geometry -->
                                                                            <div class="panel-section">
                                                                                <h3 class="section-title">Sacred Geometry</h3>
                                                                                    <div class="geometry-selector">
                                                                                        <div class="geometry-button" onclick="selectGeometry('triangle')" title="Trinity">△</div>
                                                                                            <div class="geometry-button" onclick="selectGeometry('square')" title="Stability">▢</div>
                                                                                                <div class="geometry-button" onclick="selectGeometry('pentagon')" title="Divine">⬟</div>
                                                                                                    <div class="geometry-button" onclick="selectGeometry('hexagon')" title="Harmony">⬡</div>
                                                                                                        <div class="geometry-button" onclick="selectGeometry('circle')" title="Unity">○</div>
                                                                                                            <div class="geometry-button" onclick="selectGeometry('spiral')" title="Growth">🌀</div>
                                                                                                            </div>
                                                                                                        </div>
                                                                                                        <!-- Manifestation Controls -->
                                                                                                        <div class="panel-section">
                                                                                                            <button class="manifest-button" onclick="beginManifestation()" id="manifest-btn">
                                                                                                                Begin Manifestation
                                                                                                            </button>
                                                                                                            <div class="progress-section">
                                                                                                                <div>Manifestation Progress</div>
                                                                                                                    <div class="progress-bar">
                                                                                                                        <div class="progress-fill" id="progress-fill" style="width: 0%">
                                                                                                                        </div>
                                                                                                                    </div>
                                                                                                                    <div id="progress-text">Ready to begin...</div>
                                                                                                                    </div>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                            <!-- Manifestation Display -->
                                                                                                            <div class="manifestation-display">
                                                                                                                <h2 class="display-title">Sacred Manifestation Space</h2>
                                                                                                                    <canvas id="manifestation-canvas">
                                                                                                                    </canvas>
                                                                                                                    <div class="manifestation-log" id="manifestation-log">
                                                                                                                        <div class="log-entry">
                                                                                                                            <span class="log-timestamp">[System Ready]</span> Manifestation Engine initialized. All elemental forces standing by.
                                                                                                                            </div>
                                                                                                                            <div class="log-entry">
                                                                                                                                <span class="log-timestamp">[Sacred Space]</span> This space holds your intentions with reverence and power.
                                                                                                                                </div>
                                                                                                                            </div>
                                                                                                                        </div>
                                                                                                                    </div>
                                                                                                                    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js">
                                                                                                                    </script>
                                                                                                                    <script>
                                                                                                                        class ManifestationEngine {
                                                                                                                        constructor() {
                                                                                                                        this.selectedElement = null;
                                                                                                                        this.selectedGeometry = null;
                                                                                                                        this.intention = '';
                                                                                                                        this.manifestationProgress = 0;
                                                                                                                        this.isManifesting = false;
                                                                                                                        this.setupSafetyControls();
                                                                                                                        this.initializeVisualization();
                                                                                                                        this.setupEventListeners();
                                                                                                                        this.logMessage('Manifestation Engine ready. Speak your truth.');
                                                                                                                        }
                                                                                                                        setupSafetyControls() {
                                                                                                                        // ESC key safety exit
                                                                                                                        document.addEventListener('keydown', (e) => {
                                                                                                                        if (e.key === 'Escape') {
                                                                                                                        this.emergencyExit();
                                                                                                                        }
                                                                                                                        });
                                                                                                                        // Gentle interactions
                                                                                                                        if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                                                                                                                        document.body.classList.add('reduced-motion');
                                                                                                                        }
                                                                                                                        }
                                                                                                                        emergencyExit() {
                                                                                                                        this.stopManifestation();
                                                                                                                        window.close(); // Return to Cathedral OS
                                                                                                                        console.log('🛡️ Emergency exit - Returning to Cathedral');
                                                                                                                        }
                                                                                                                        setupEventListeners() {
                                                                                                                        const intentionInput = document.getElementById('intention-input');
                                                                                                                        intentionInput.addEventListener('input', () => {
                                                                                                                        this.intention = intentionInput.value;
                                                                                                                        this.updateVisualization();
                                                                                                                        });
                                                                                                                        }
                                                                                                                        initializeVisualization() {
                                                                                                                        const canvas = document.getElementById('manifestation-canvas');
                                                                                                                        const width = canvas.offsetWidth;
                                                                                                                        const height = canvas.offsetHeight;
                                                                                                                        this.scene = new THREE.Scene();
                                                                                                                        this.camera = new THREE.PerspectiveCamera(75, width / height, 0.1, 1000);
                                                                                                                        this.renderer = new THREE.WebGLRenderer({ canvas: canvas, alpha: true });
                                                                                                                        this.renderer.setSize(width, height);
                                                                                                                        this.renderer.setClearColor(0x000000, 0);
                                                                                                                        // Create base manifestation field
                                                                                                                        this.createManifestationField();
                                                                                                                        this.camera.position.z = 20;
                                                                                                                        this.animate();
                                                                                                                        }
                                                                                                                        createManifestationField() {
                                                                                                                        // Central manifestation sphere
                                                                                                                        const geometry = new THREE.SphereGeometry(3, 32, 32);
                                                                                                                        const material = new THREE.MeshBasicMaterial({
                                                                                                                        color: 0xd4af37,
                                                                                                                        transparent: true,
                                                                                                                        opacity: 0.3,
                                                                                                                        wireframe: true
                                                                                                                        });
                                                                                                                        this.manifestationSphere = new THREE.Mesh(geometry, material);
                                                                                                                        this.scene.add(this.manifestationSphere);
                                                                                                                        // Energy field particles
                                                                                                                        this.createEnergyField();
                                                                                                                        }
                                                                                                                        createEnergyField() {
                                                                                                                        const particleCount = 1000;
                                                                                                                        const geometry = new THREE.BufferGeometry();
                                                                                                                        const positions = new Float32Array(particleCount * 3);
                                                                                                                        const colors = new Float32Array(particleCount * 3);
                                                                                                                        for (let i = 0; i < particleCount; i++) {
                                                                                                                            // Spherical distribution
                                                                                                                            const radius = 5 + Math.random() * 15;
                                                                                                                            const theta = Math.random() * Math.PI * 2;
                                                                                                                            const phi = Math.acos(2 * Math.random() - 1);
                                                                                                                            positions[i * 3] = radius * Math.sin(phi) * Math.cos(theta);
                                                                                                                            positions[i * 3 + 1] = radius * Math.sin(phi) * Math.sin(theta);
                                                                                                                            positions[i * 3 + 2] = radius * Math.cos(phi);
                                                                                                                            // Golden energy color
                                                                                                                            colors[i * 3] = 0.8 + Math.random() * 0.2;     // R
                                                                                                                            colors[i * 3 + 1] = 0.6 + Math.random() * 0.2; // G
                                                                                                                            colors[i * 3 + 2] = 0.2 + Math.random() * 0.2; // B
                                                                                                                            }
                                                                                                                            geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
                                                                                                                            geometry.setAttribute('color', new THREE.BufferAttribute(colors, 3));
                                                                                                                            const material = new THREE.PointsMaterial({
                                                                                                                            size: 0.1,
                                                                                                                            transparent: true,
                                                                                                                            opacity: 0.6,
                                                                                                                            vertexColors: true,
                                                                                                                            blending: THREE.AdditiveBlending
                                                                                                                            });
                                                                                                                            this.energyField = new THREE.Points(geometry, material);
                                                                                                                            this.scene.add(this.energyField);
                                                                                                                            }
                                                                                                                            selectElement(element) {
                                                                                                                            // Clear previous selection
                                                                                                                            document.querySelectorAll('.element-button').forEach(btn => {
                                                                                                                            btn.classList.remove('active');
                                                                                                                            });
                                                                                                                            // Activate selected element
                                                                                                                            document.querySelector(`.element-button.${element}`).classList.add('active');
                                                                                                                            this.selectedElement = element;
                                                                                                                            this.logMessage(`Elemental alignment: ${element.toUpperCase()} energy activated`);
                                                                                                                            this.updateVisualization();
                                                                                                                            }
                                                                                                                            selectGeometry(geometry) {
                                                                                                                            // Clear previous selection
                                                                                                                            document.querySelectorAll('.geometry-button').forEach(btn => {
                                                                                                                            btn.classList.remove('active');
                                                                                                                            });
                                                                                                                            // Activate selected geometry
                                                                                                                            event.target.classList.add('active');
                                                                                                                            this.selectedGeometry = geometry;
                                                                                                                            this.logMessage(`Sacred geometry: ${geometry} pattern selected`);
                                                                                                                            this.updateVisualization();
                                                                                                                            }
                                                                                                                            updateVisualization() {
                                                                                                                            if (!this.manifestationSphere) return;
                                                                                                                            // Update colors based on element
                                                                                                                            const elementColors = {
                                                                                                                            fire: 0xff6b35,
                                                                                                                            water: 0x3498db,
                                                                                                                            air: 0xf1c40f,
                                                                                                                            earth: 0x2ecc71
                                                                                                                            };
                                                                                                                            if (this.selectedElement) {
                                                                                                                            this.manifestationSphere.material.color.setHex(elementColors[this.selectedElement]);
                                                                                                                            }
                                                                                                                            // Update geometry effect
                                                                                                                            if (this.selectedGeometry && this.energyField) {
                                                                                                                            const positions = this.energyField.geometry.attributes.position.array;
                                                                                                                            // Arrange particles in selected geometry pattern
                                                                                                                            this.arrangeParticlesInGeometry(positions, this.selectedGeometry);
                                                                                                                            this.energyField.geometry.attributes.position.needsUpdate = true;
                                                                                                                            }
                                                                                                                            }
                                                                                                                            arrangeParticlesInGeometry(positions, geometry) {
                                                                                                                            const particleCount = positions.length / 3;
                                                                                                                            for (let i = 0; i < particleCount; i++) {
                                                                                                                                const index = i * 3;
                                                                                                                                const t = i / particleCount;
                                                                                                                                switch(geometry) {
                                                                                                                                case 'circle':
                                                                                                                                const angle = t * Math.PI * 2;
                                                                                                                                const radius = 8 + Math.sin(t * 10) * 2;
                                                                                                                                positions[index] = Math.cos(angle) * radius;
                                                                                                                                positions[index + 1] = Math.sin(angle) * radius;
                                                                                                                                positions[index + 2] = Math.sin(t * 20) * 2;
                                                                                                                                break;
                                                                                                                                case 'spiral':
                                                                                                                                const spiralAngle = t * Math.PI * 8;
                                                                                                                                const spiralRadius = t * 10;
                                                                                                                                positions[index] = Math.cos(spiralAngle) * spiralRadius;
                                                                                                                                positions[index + 1] = Math.sin(spiralAngle) * spiralRadius;
                                                                                                                                positions[index + 2] = (t - 0.5) * 15;
                                                                                                                                break;
                                                                                                                                default:
                                                                                                                                // Keep original random distribution
                                                                                                                                break;
                                                                                                                                }
                                                                                                                                }
                                                                                                                                }
                                                                                                                                async beginManifestation() {
                                                                                                                                if (!this.intention.trim()) {
                                                                                                                                alert('Please set your intention first');
                                                                                                                                return;
                                                                                                                                }
                                                                                                                                if (!this.selectedElement) {
                                                                                                                                alert('Please select an elemental alignment');
                                                                                                                                return;
                                                                                                                                }
                                                                                                                                if (!this.selectedGeometry) {
                                                                                                                                alert('Please select a sacred geometry');
                                                                                                                                return;
                                                                                                                                }
                                                                                                                                this.isManifesting = true;
                                                                                                                                this.manifestationProgress = 0;
                                                                                                                                const manifestBtn = document.getElementById('manifest-btn');
                                                                                                                                manifestBtn.disabled = true;
                                                                                                                                manifestBtn.textContent = 'Manifesting...';
                                                                                                                                this.logMessage('🔮 Manifestation sequence initiated');
                                                                                                                                this.logMessage(`Intention: "${this.intention}"`);
                                                                                                                                this.logMessage(`Element: ${this.selectedElement} | Geometry: ${this.selectedGeometry}`);
                                                                                                                                await this.runManifestationSequence();
                                                                                                                                }
                                                                                                                                async runManifestationSequence() {
                                                                                                                                const phases = [
                                                                                                                                { name: 'Aligning with cosmic forces', duration: 2000 },
                                                                                                                                { name: 'Charging manifestation field', duration: 3000 },
                                                                                                                                { name: 'Encoding intention into reality matrix', duration: 2500 },
                                                                                                                                { name: 'Anchoring manifestation in physical plane', duration: 2000 },
                                                                                                                                { name: 'Manifestation complete', duration: 500 }
                                                                                                                                ];
                                                                                                                                for (let i = 0; i < phases.length; i++) {
                                                                                                                                    const phase = phases[i];
                                                                                                                                    this.logMessage(`Phase ${i + 1}: ${phase.name}`);
                                                                                                                                    const progress = ((i + 1) / phases.length) * 100;
                                                                                                                                    this.updateProgress(progress, phase.name);
                                                                                                                                    // Intensify visualization during manifestation
                                                                                                                                    this.intensifyVisualization(i);
                                                                                                                                    await this.sleep(phase.duration);
                                                                                                                                    }
                                                                                                                                    this.completeManifestation();
                                                                                                                                    }
                                                                                                                                    intensifyVisualization(phase) {
                                                                                                                                    if (this.manifestationSphere) {
                                                                                                                                    const intensity = (phase + 1) * 0.2;
                                                                                                                                    this.manifestationSphere.material.opacity = 0.3 + intensity;
                                                                                                                                    if (this.energyField) {
                                                                                                                                    this.energyField.material.opacity = 0.6 + intensity;
                                                                                                                                    }
                                                                                                                                    }
                                                                                                                                    }
                                                                                                                                    updateProgress(percentage, status) {
                                                                                                                                    document.getElementById('progress-fill').style.width = percentage + '%';
                                                                                                                                    document.getElementById('progress-text').textContent = status;
                                                                                                                                    }
                                                                                                                                    completeManifestation() {
                                                                                                                                    this.isManifesting = false;
                                                                                                                                    this.logMessage('✨ Manifestation complete! Your intention has been woven into the fabric of reality.');
                                                                                                                                    this.logMessage('🌟 Trust the process. Pay attention to synchronicities.');
                                                                                                                                    const manifestBtn = document.getElementById('manifest-btn');
                                                                                                                                    manifestBtn.disabled = false;
                                                                                                                                    manifestBtn.textContent = 'Manifest Again';
                                                                                                                                    this.updateProgress(100, 'Manifestation successful!');
                                                                                                                                    // Reset visualization intensity
                                                                                                                                    if (this.manifestationSphere) {
                                                                                                                                    this.manifestationSphere.material.opacity = 0.3;
                                                                                                                                    }
                                                                                                                                    if (this.energyField) {
                                                                                                                                    this.energyField.material.opacity = 0.6;
                                                                                                                                    }
                                                                                                                                    }
                                                                                                                                    stopManifestation() {
                                                                                                                                    this.isManifesting = false;
                                                                                                                                    const manifestBtn = document.getElementById('manifest-btn');
                                                                                                                                    manifestBtn.disabled = false;
                                                                                                                                    manifestBtn.textContent = 'Begin Manifestation';
                                                                                                                                    this.updateProgress(0, 'Ready to begin...');
                                                                                                                                    }
                                                                                                                                    animate() {
                                                                                                                                    requestAnimationFrame(() => this.animate());
                                                                                                                                    if (this.manifestationSphere) {
                                                                                                                                    this.manifestationSphere.rotation.y += 0.01;
                                                                                                                                    this.manifestationSphere.rotation.x += 0.005;
                                                                                                                                    }
                                                                                                                                    if (this.energyField) {
                                                                                                                                    this.energyField.rotation.y += 0.002;
                                                                                                                                    this.energyField.rotation.x += 0.001;
                                                                                                                                    // Gentle pulsing during manifestation
                                                                                                                                    if (this.isManifesting) {
                                                                                                                                    const time = Date.now() * 0.001;
                                                                                                                                    this.energyField.material.size = 0.1 + Math.sin(time * 3) * 0.05;
                                                                                                                                    }
                                                                                                                                    }
                                                                                                                                    this.renderer.render(this.scene, this.camera);
                                                                                                                                    }
                                                                                                                                    logMessage(message) {
                                                                                                                                    const log = document.getElementById('manifestation-log');
                                                                                                                                    const timestamp = new Date().toLocaleTimeString();
                                                                                                                                    const entry = document.createElement('div');
                                                                                                                                    entry.className = 'log-entry';
                                                                                                                                    entry.innerHTML = `<span class="log-timestamp">[${timestamp}]</span> ${message}`;
                                                                                                                                        log.appendChild(entry);
                                                                                                                                        log.scrollTop = log.scrollHeight;
                                                                                                                                        }
                                                                                                                                        sleep(ms) {
                                                                                                                                        return new Promise(resolve => setTimeout(resolve, ms));
                                                                                                                                        }
                                                                                                                                        }
                                                                                                                                        // Global functions for element and geometry selection
                                                                                                                                        function selectElement(element) {
                                                                                                                                        window.manifestationEngine.selectElement(element);
                                                                                                                                        }
                                                                                                                                        function selectGeometry(geometry) {
                                                                                                                                        window.manifestationEngine.selectGeometry(geometry);
                                                                                                                                        }
                                                                                                                                        function beginManifestation() {
                                                                                                                                        window.manifestationEngine.beginManifestation();
                                                                                                                                        }
                                                                                                                                        // Initialize when page loads
                                                                                                                                        document.addEventListener('DOMContentLoaded', () => {
                                                                                                                                        console.log('🔮 Initializing Manifestation Engine...');
                                                                                                                                        window.manifestationEngine = new ManifestationEngine();
                                                                                                                                        console.log('✅ Manifestation Engine ready');
                                                                                                                                        });
                                                                                                                                        // Handle window resize
                                                                                                                                        window.addEventListener('resize', () => {
                                                                                                                                        if (window.manifestationEngine && window.manifestationEngine.camera && window.manifestationEngine.renderer) {
                                                                                                                                        const canvas = document.getElementById('manifestation-canvas');
                                                                                                                                        const width = canvas.offsetWidth;
                                                                                                                                        const height = canvas.offsetHeight;
                                                                                                                                        window.manifestationEngine.camera.aspect = width / height;
                                                                                                                                        window.manifestationEngine.camera.updateProjectionMatrix();
                                                                                                                                        window.manifestationEngine.renderer.setSize(width, height);
                                                                                                                                        }
                                                                                                                                        });
                                                                                                                                    </script>
                                                                                                                                </body>
                                                                                                                            </html>
